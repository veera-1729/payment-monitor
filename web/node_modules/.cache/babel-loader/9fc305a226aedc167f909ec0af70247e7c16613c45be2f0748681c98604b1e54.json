{"ast":null,"code":"var _jsxFileName = \"/Users/gyanendra.singh/ai_stuff/alterbridge/payment-monitor/web/src/pages/Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Container, Grid, Paper, Typography } from '@mui/material';\nimport MetricsChart from '../components/MetricsChart';\nimport DimensionSelector from '../components/DimensionSelector';\nimport AlertsList from '../components/AlertsList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DIMENSIONS = ['gateway', 'gateway_payment_method', 'gateway_merchant'];\nfunction Dashboard() {\n  _s();\n  const [selectedDimension, setSelectedDimension] = useState('gateway');\n  const [metricsData, setMetricsData] = useState([]);\n  const [alerts, setAlerts] = useState([]);\n  useEffect(() => {\n    // Set up WebSocket connection for real-time updates\n    const ws = new WebSocket('ws://localhost:8080/ws');\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'metrics') {\n        setMetricsData(prevData => {\n          const newData = [...prevData, data];\n          // Keep only last 30 data points for better visualization\n          return newData.slice(-30);\n        });\n      } else if (data.type === 'alert') {\n        setAlerts(prevAlerts => [data, ...prevAlerts].slice(0, 10));\n      }\n    };\n    ws.onerror = error => {\n      console.error('WebSocket error:', error);\n    };\n    return () => {\n      ws.close();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    component: \"main\",\n    sx: {\n      flexGrow: 1,\n      py: 4\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"xl\",\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        sx: {\n          mb: 4\n        },\n        children: \"Payment Success Rate Monitor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              p: 2\n            },\n            children: /*#__PURE__*/_jsxDEV(DimensionSelector, {\n              dimensions: DIMENSIONS,\n              selectedDimension: selectedDimension,\n              onDimensionChange: setSelectedDimension\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          lg: 8,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              p: 2,\n              height: '400px'\n            },\n            children: /*#__PURE__*/_jsxDEV(MetricsChart, {\n              data: metricsData.filter(d => d.dimension === selectedDimension),\n              dimension: selectedDimension\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          lg: 4,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              p: 2,\n              height: '400px',\n              overflow: 'auto'\n            },\n            children: /*#__PURE__*/_jsxDEV(AlertsList, {\n              alerts: alerts\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"9Humk+ZiHdFYaHCS59Nird5DJ4k=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","Box","Container","Grid","Paper","Typography","MetricsChart","DimensionSelector","AlertsList","jsxDEV","_jsxDEV","DIMENSIONS","Dashboard","_s","selectedDimension","setSelectedDimension","metricsData","setMetricsData","alerts","setAlerts","ws","WebSocket","onmessage","event","data","JSON","parse","type","prevData","newData","slice","prevAlerts","onerror","error","console","close","component","sx","flexGrow","py","children","maxWidth","variant","mb","fileName","_jsxFileName","lineNumber","columnNumber","container","spacing","item","xs","p","dimensions","onDimensionChange","lg","height","filter","d","dimension","overflow","_c","$RefreshReg$"],"sources":["/Users/gyanendra.singh/ai_stuff/alterbridge/payment-monitor/web/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Box, Container, Grid, Paper, Typography } from '@mui/material';\nimport MetricsChart from '../components/MetricsChart';\nimport DimensionSelector from '../components/DimensionSelector';\nimport AlertsList from '../components/AlertsList';\n\nconst DIMENSIONS = ['gateway', 'gateway_payment_method', 'gateway_merchant'];\n\nfunction Dashboard() {\n  const [selectedDimension, setSelectedDimension] = useState('gateway');\n  const [metricsData, setMetricsData] = useState([]);\n  const [alerts, setAlerts] = useState([]);\n\n  useEffect(() => {\n    // Set up WebSocket connection for real-time updates\n    const ws = new WebSocket('ws://localhost:8080/ws');\n\n    ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'metrics') {\n        setMetricsData(prevData => {\n          const newData = [...prevData, data];\n          // Keep only last 30 data points for better visualization\n          return newData.slice(-30);\n        });\n      } else if (data.type === 'alert') {\n        setAlerts(prevAlerts => [data, ...prevAlerts].slice(0, 10));\n      }\n    };\n\n    ws.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n\n    return () => {\n      ws.close();\n    };\n  }, []);\n\n  return (\n    <Box component=\"main\" sx={{ flexGrow: 1, py: 4 }}>\n      <Container maxWidth=\"xl\">\n        <Typography variant=\"h4\" sx={{ mb: 4 }}>\n          Payment Success Rate Monitor\n        </Typography>\n        \n        <Grid container spacing={3}>\n          {/* Dimension Selector */}\n          <Grid item xs={12}>\n            <Paper sx={{ p: 2 }}>\n              <DimensionSelector\n                dimensions={DIMENSIONS}\n                selectedDimension={selectedDimension}\n                onDimensionChange={setSelectedDimension}\n              />\n            </Paper>\n          </Grid>\n\n          {/* Metrics Chart */}\n          <Grid item xs={12} lg={8}>\n            <Paper sx={{ p: 2, height: '400px' }}>\n              <MetricsChart\n                data={metricsData.filter(d => d.dimension === selectedDimension)}\n                dimension={selectedDimension}\n              />\n            </Paper>\n          </Grid>\n\n          {/* Alerts List */}\n          <Grid item xs={12} lg={4}>\n            <Paper sx={{ p: 2, height: '400px', overflow: 'auto' }}>\n              <AlertsList alerts={alerts} />\n            </Paper>\n          </Grid>\n        </Grid>\n      </Container>\n    </Box>\n  );\n}\n\nexport default Dashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}